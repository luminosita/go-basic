{
  "$schema": "https://docs.renovatebot.com/renovate-schema.json",
  "extends": [
    "config:recommended"
  ],
  "description": "Renovate configuration for CHANGE_ME - Automated dependency management with security-focused batching strategy",
  "timezone": "America/Los_Angeles",
  "schedule": [
    "after 10pm every weekday",
    "before 5am every weekday",
    "every weekend"
  ],
  "dependencyDashboard": true,
  "dependencyDashboardTitle": "üîÑ Dependency Updates Dashboard",
  "dependencyDashboardHeader": "This dashboard tracks all pending dependency updates. Security updates are prioritized and created immediately. Minor updates are batched weekly. Major updates require individual review.",
  "labels": [
    "dependencies",
    "automated"
  ],
  "assignees": [],
  "reviewers": [],
  "commitMessagePrefix": "chore(deps):",
  "commitMessageAction": "update",
  "commitMessageTopic": "{{depName}}",
  "commitMessageExtra": "to {{newValue}}",
  "prConcurrentLimit": 10,
  "prCreation": "immediate",
  "prHourlyLimit": 5,
  "automerge": false,
  "platformAutomerge": false,
  "ignoreTests": false,
  "ignorePaths": [
    "**/node_modules/**",
    "**/vendor/**",
    "**/dist/**",
    "**/build/**",
    "**/bin/**"
  ],
  "packageRules": [
    {
      "description": "Security updates - Create individual PRs immediately with high priority",
      "matchUpdateTypes": [
        "patch"
      ],
      "matchCurrentVersion": "!/^0/",
      "matchDatasources": [
        "go"
      ],
      "isVulnerabilityAlert": true,
      "groupName": null,
      "labels": [
        "dependencies",
        "security",
        "priority-high"
      ],
      "prPriority": 10,
      "prCreation": "immediate",
      "automerge": false,
      "schedule": [
        "at any time"
      ],
      "prTitle": "[Security] Update {{depName}} to {{newVersion}}"
    },
    {
      "description": "Minor and patch updates - Batch weekly to reduce PR noise",
      "matchUpdateTypes": [
        "minor",
        "patch"
      ],
      "matchCurrentVersion": "!/^0/",
      "matchDatasources": [
        "go"
      ],
      "isVulnerabilityAlert": false,
      "groupName": "Go dependencies (weekly batch)",
      "groupSlug": "go-deps-batch",
      "labels": [
        "dependencies",
        "maintenance"
      ],
      "prPriority": 5,
      "schedule": [
        "before 6am on Monday"
      ],
      "prTitle": "Update Go dependencies (weekly batch)",
      "postUpdateOptions": [
        "gomodTidy"
      ]
    },
    {
      "description": "Major updates - Create individual PRs for careful review of breaking changes",
      "matchUpdateTypes": [
        "major"
      ],
      "matchDatasources": [
        "go"
      ],
      "groupName": null,
      "labels": [
        "dependencies",
        "major-update",
        "breaking-changes"
      ],
      "prPriority": 7,
      "prCreation": "immediate",
      "automerge": false,
      "prTitle": "[Major] Update {{depName}} from {{currentVersion}} to {{newVersion}}",
      "prBodyNotes": [
        "‚ö†Ô∏è **This is a major version update that may contain breaking changes.**",
        "",
        "Before merging:",
        "1. Review the changelog and migration guide",
        "2. Run `go test -race ./...` to verify all tests pass",
        "3. Check for deprecation warnings with `staticcheck ./...`",
        "4. Test manually if necessary",
        "5. Verify compatibility with minimum Go version in go.mod"
      ],
      "postUpdateOptions": [
        "gomodTidy"
      ]
    },
    {
      "description": "Pre-1.0 packages - Treat minor updates as potentially breaking",
      "matchUpdateTypes": [
        "minor"
      ],
      "matchCurrentVersion": "/^0/",
      "matchDatasources": [
        "go"
      ],
      "groupName": null,
      "labels": [
        "dependencies",
        "pre-release",
        "review-required"
      ],
      "prPriority": 6,
      "prTitle": "[Pre-1.0] Update {{depName}} from {{currentVersion}} to {{newVersion}}",
      "prBodyNotes": [
        "‚ö†Ô∏è **This package is pre-1.0 - minor version updates may contain breaking changes per semantic versioning.**"
      ],
      "postUpdateOptions": [
        "gomodTidy"
      ]
    },
    {
      "description": "Indirect dependencies - Lower priority, batch together",
      "matchDepTypes": [
        "indirect"
      ],
      "matchDatasources": [
        "go"
      ],
      "groupName": "Go indirect dependencies (weekly batch)",
      "labels": [
        "dependencies",
        "indirect"
      ],
      "prPriority": 3,
      "schedule": [
        "before 6am on Monday"
      ],
      "postUpdateOptions": [
        "gomodTidy"
      ]
    },
    {
      "description": "Ignore unstable releases - Only stable versions",
      "matchDatasources": [
        "go"
      ],
      "ignoreUnstable": true,
      "allowedVersions": "!/alpha|beta|rc/i"
    },
    {
      "description": "Go version updates - Treat as major (requires review)",
      "matchDepNames": [
        "go"
      ],
      "matchDatasources": [
        "golang-version"
      ],
      "labels": [
        "dependencies",
        "go-version",
        "major-update"
      ],
      "prPriority": 8,
      "prCreation": "immediate",
      "automerge": false,
      "prTitle": "[Go] Update Go version to {{newVersion}}",
      "prBodyNotes": [
        "‚ö†Ô∏è **This updates the Go toolchain version.**",
        "",
        "Before merging:",
        "1. Review Go release notes for breaking changes",
        "2. Ensure CI/CD pipelines support this Go version",
        "3. Test with `go test -race ./...`",
        "4. Update Docker/container images to match Go version"
      ]
    }
  ],
  "golang": {
    "enabled": true
  },
  "gomod": {
    "enabled": true
  },
  "postUpdateOptions": [
    "gomodTidy"
  ],
  "lockFileMaintenance": {
    "enabled": true,
    "schedule": [
      "before 6am on Monday"
    ],
    "automerge": false,
    "prTitle": "Lock file maintenance (weekly)",
    "prBodyNotes": [
      "This PR updates go.sum to ensure dependencies are pinned to latest compatible versions.",
      "",
      "Runs `go mod tidy` to clean up unused dependencies and update checksums.",
      "",
      "No version changes in go.mod, but transitive dependencies may be updated."
    ],
    "commitMessageAction": "refresh",
    "commitMessageTopic": "go.sum",
    "postUpdateOptions": [
      "gomodTidy"
    ]
  },
  "vulnerabilityAlerts": {
    "enabled": true,
    "labels": [
      "security",
      "vulnerability"
    ],
    "assignees": [],
    "reviewers": []
  },
  "osvVulnerabilityAlerts": true,
  "suppressNotifications": [
    "prIgnoreNotification"
  ],
  "prFooter": "---\n\nü§ñ This PR was created by Renovate Bot. Review the changes carefully and ensure all CI/CD checks pass before merging.\n\nüìö **Resources:**\n- [Renovate Documentation](https://docs.renovatebot.com/)\n- [Go Modules Reference](https://go.dev/ref/mod)\n- Run `govulncheck ./...` to check for known vulnerabilities"
}
